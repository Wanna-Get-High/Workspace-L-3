package questionnaires;

import java.util.StringTokenizer;
import questionnairesUI.*;

public class MultipleClosedAnswer extends Answer<String> 
{
	protected static String theAnswers;
    /**
     * Instantiates a new MultipleClosedAnswer.
     *
     * @param a the integer.
     */
    public MultipleClosedAnswer(String a) 
    {
    	super(a);
    }

    /**
     * Builds the Multiple Closed Answer.
     *
     * @param answerText the answer text
     * @return the answer
     */
    public static Answer<?> build(String answerText)
    {
    	StringTokenizer st = new StringTokenizer(answerText,"\\s+|\\s+");
    	String answer = "";
    	int it = 0;

    	if (st.hasMoreTokens())
    	{
    		answer = st.nextToken();
    		theAnswers = answer;
    	}

    	while (st.hasMoreElements())
    	{
			if (it%2 == 0)
				theAnswers = st.nextToken() + " | " + theAnswers;
			
			else
				theAnswers +=  " | " + st.nextToken();
 
    		it++;
    	}
    	
    	return new MultipleClosedAnswer(answer);
    }
    
    
    @Override
    public boolean checkAnswer(String userAnswer) 
	{
		if (theAnswers.contains(userAnswer))
			return true;

    	return false;
	}

    @Override
    public boolean acceptablePattern(String text) 
    {
    	StringTokenizer st = new StringTokenizer(this.answer,"\\s+|\\s+");
    	while (st.hasMoreTokens())
    	{	

    		if (st.nextToken().contains(text))
    			return true;
    	}
    	return false;
    }
    
    @Override
    public String getType() 
    {
        return theAnswers;
    }

	@Override
	public AnswerUI getUI(Question q) 
	{
		return new MultipleAnswerUI(this,q);
	}
}
